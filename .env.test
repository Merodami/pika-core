# Test Environment Configuration
# This file contains environment variables for running tests

# ===========================================
# Backend
# ===========================================

# Environment variables
NODE_ENV=test
ENV_STAGE=test
LOG_LEVEL=error
APP_NAME=Pika
APP_VERSION=0.1.0
BASE_URL=http://127.0.0.1:4001
FRONTEND_URL=http://127.0.0.1:3000
API_PREFIX=/api/v1
HOST=0.0.0.0
PORT=4001
DEFAULT_TIMEZONE=Europe/Belgium
TIMEZONE=America/Asuncion
DEFAULT_LANGUAGE=en
SUPPORTED_LANGUAGES=es,en,gn
DEFAULT_CURRENCY=GBP

# Database configuration (test)
PG_HOST=127.0.0.1
PG_PORT=6437
PG_DATABASE=pika_test
PG_USER=postgres
PG_PASSWORD=postgres
PG_SSL=false
PG_MAX_CONNECTIONS=10
PG_IDLE_TIMEOUT=10000
PG_CONNECTION_TIMEOUT=2000
DATABASE_URL=postgresql://postgres:postgres@127.0.0.1:6437/pika_test

# Redis cache configuration (test)
REDIS_HOST=127.0.0.1
REDIS_PORT=7382
REDIS_PASSWORD=
REDIS_PREFIX=pika_test:
REDIS_DEFAULT_TTL=3600
REDIS_RETRY_DELAY=50
REDIS_MAX_RETRY_DELAY=2000
CACHE_DISABLED=false


# Service configuration
USER_SERVICE_NAME=user_service
USER_API_URL=http://127.0.0.1:5501
USER_SERVICE_PORT=5501
USER_SERVICE_HOST=0.0.0.0

# Auth services
AUTH_SERVICE_NAME=auth_service
AUTH_API_URL=http://127.0.0.1:5502
AUTH_SERVICE_PORT=5502
AUTH_SERVICE_HOST=0.0.0.0

# Gym services
GYM_SERVICE_NAME=gym_service
GYM_API_URL=http://127.0.0.1:5503
GYM_SERVICE_PORT=5503
GYM_SERVICE_HOST=0.0.0.0

# Session services
SESSION_SERVICE_NAME=session_service
SESSION_API_URL=http://127.0.0.1:5504
SESSION_SERVICE_PORT=5504
SESSION_SERVICE_HOST=0.0.0.0

# Payment services
PAYMENT_SERVICE_NAME=payment_service
PAYMENT_API_URL=http://127.0.0.1:5505
PAYMENT_SERVICE_PORT=5505
PAYMENT_SERVICE_HOST=0.0.0.0

# Stripe configuration
STRIPE_SECRET_KEY=sk_test_dummy_key_for_testing
STRIPE_WEBHOOK_SECRET=whsec_test_dummy_webhook_secret_for_testing
STRIPE_MOCK_PORT=12111
STRIPE_MOCK_HOST=127.0.0.1

# Subscription services
SUBSCRIPTION_SERVICE_NAME=subscription_service
SUBSCRIPTION_API_URL=http://127.0.0.1:5506
SUBSCRIPTION_SERVICE_PORT=5506
SUBSCRIPTION_SERVICE_HOST=0.0.0.0

# Communication services
COMMUNICATION_SERVICE_NAME=communication_service
COMMUNICATION_API_URL=http://127.0.0.1:5507
COMMUNICATION_SERVICE_PORT=5507
COMMUNICATION_SERVICE_HOST=0.0.0.0

# Email Provider Configuration
EMAIL_PROVIDER_PRIMARY=mailhog
EMAIL_PROVIDER_FALLBACK=console
RESEND_API_KEY=

# SMS Provider Configuration
SMS_PROVIDER_PRIMARY=console
SMS_SENDER_ID=Pika
SMS_TYPE=Transactional

# File Storage Service (Test)
FILE_STORAGE_SERVICE_NAME=file_storage_service_test
FILE_STORAGE_API_URL=http://127.0.0.1:5511
FILE_STORAGE_SERVICE_PORT=5511
FILE_STORAGE_SERVICE_HOST=0.0.0.0
FILE_STORAGE_PATH=./test-uploads

# Storage Provider Configuration (Test) - Use the MinIO config below

# Push Notification Configuration
PUSH_PROVIDER=console

# LocalStack Configuration (for testing)
USE_LOCALSTACK=true
LOCALSTACK_ENDPOINT=http://127.0.0.1:4566

# Email Queue Configuration
EMAIL_QUEUE_ENABLED=false
EMAIL_QUEUE_CONCURRENCY=5
EMAIL_RETRY_ATTEMPTS=3
EMAIL_RETRY_DELAY=5000

# Rate Limiting Configuration
EMAIL_RATE_LIMIT_MAX=100
EMAIL_RATE_LIMIT_WINDOW=3600000
SMS_RATE_LIMIT_MAX=50
SMS_RATE_LIMIT_WINDOW=3600000
PDF_RATE_LIMIT_MAX_REQUESTS_PER_HOUR=100
PDF_RATE_LIMIT_MAX_REQUESTS_PER_DAY=1000
PDF_RATE_LIMIT_WINDOW_SIZE_MINUTES=60

# Deployment Environment Detection
VERCEL=
CI=true
GITHUB_ACTIONS=

# Template & Notification Cache Configuration
TEMPLATE_CACHE_TTL=3600
NOTIFICATION_CACHE_TTL=60

# Support services
SUPPORT_SERVICE_NAME=support_service
SUPPORT_API_URL=http://127.0.0.1:5508
SUPPORT_SERVICE_PORT=5508
SUPPORT_SERVICE_HOST=0.0.0.0

# Social services
SOCIAL_SERVICE_NAME=social_service
SOCIAL_API_URL=http://127.0.0.1:5509
SOCIAL_SERVICE_PORT=5509
SOCIAL_SERVICE_HOST=0.0.0.0

# File Storage services
FILE_STORAGE_SERVICE_NAME=file_storage_service
FILE_STORAGE_API_URL=http://127.0.0.1:5510
FILE_STORAGE_SERVICE_PORT=5510
FILE_STORAGE_SERVICE_HOST=0.0.0.0

# Business services
BUSINESS_SERVICE_NAME=business_service
BUSINESS_API_URL=http://127.0.0.1:5511
BUSINESS_SERVICE_PORT=5511
BUSINESS_SERVICE_HOST=0.0.0.0

# Category services
CATEGORY_SERVICE_NAME=category_service
CATEGORY_API_URL=http://127.0.0.1:5512
CATEGORY_SERVICE_PORT=5512
CATEGORY_SERVICE_HOST=0.0.0.0

# PDF services
PDF_SERVICE_NAME=pdf_service
PDF_API_URL=http://127.0.0.1:5513
PDF_SERVICE_PORT=5513
PDF_SERVICE_HOST=0.0.0.0

# Voucher services
VOUCHER_SERVICE_NAME=voucher_service
VOUCHER_API_URL=http://127.0.0.1:5514
VOUCHER_SERVICE_PORT=5514
VOUCHER_SERVICE_HOST=0.0.0.0
VOUCHER_CODE_ALPHABET=ABCDEFGHJKLMNPQRSTUVWXYZ23456789
VOUCHER_SHORT_CODE_LENGTH=8
VOUCHER_JWT_ALGORITHM=RS256
VOUCHER_JWT_PRIVATE_KEY=

# Geolocation services
GOOGLE_MAPS_API_KEY=
GEOCODING_PROVIDER=osm

# API Gateway
API_GATEWAY_PORT=5500
API_GATEWAY_BASE_URL=http://127.0.0.1:5500

# Authentication & security (test)
SKIP_AUTH=false
JWT_SECRET=a3f2c1b4d5e6f7890a1b2c3d4e5f67890abcdeffedcba0987654321fedcba0987
INTERNAL_API_TOKEN=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJpbnRlcm5hbCIsImVtYWlsIjoiaW50ZXJuYWxAYXBwLmNvbSIsInJvbGUiOiJ1c2VyIiwiaWF0IjoxNzQzMzg2NDU4LCJleHAiOjE3NzQ5NDQwNTh9.8NrrgnNflWNf3TlRv2YQlrPH7akQPFYRBBFJvc8dW0I
JWT_ISSUER=pika-api
JWT_AUDIENCE=pika-app
PASSWORD_SALT_ROUNDS=10
JWT_ACCESS_EXPIRY=2h
JWT_REFRESH_EXPIRY=7d
JWT_ALGORITHM=RS256
JWT_PRIVATE_KEY=-----BEGIN PRIVATE KEY-----\n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\ntmEUXmXgvLyxR8zW4F8RXic=\n-----END PRIVATE KEY-----\n
JWT_PUBLIC_KEY=-----BEGIN PUBLIC KEY-----\nMIIBojANBgkqhkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAsoGLQ6libRDEw/cLMPpm\nlz7bCvTlxtEjud8D4JcC/dVZaAIMbSNEB6adUcU1M3+RyVWz9zpBJ3MxPXQCMsav\nJF7qNN2/UwPlBRGXX92QtOCA2Owdb601Q2IMwUpVWDQhtmrVopnMWdKu/Q5Q2+iI\nPTjjAv65/n+7fCl78/BZGKi9NOZYEu65OxpRM3Eu7mT0/BsvkcbGpq6qI7f52UD4\nsrPeZ49w53LSI7xo2RMlHfBhzpGJh6PHp2LOaq4XjTBnNpRACJWbo6/vTzoU88gu\nlHOuP01lCkOBd0ZMAnmsh7d/Nif2JNH68PcvNEt/sPND7hUM4oHrQTiwyrEspRNq\njJTIeUgE955ZW3zyBvg9REyzOik0PY7Qpl9ConXftNzN4J//iNHap49LzdMYFpul\nWlZRXmMkmZI7Ln5lGcFqRIb4qCIki38240a80S8CmibOntjGkG6eK+YXwIZ/03fc\nflntWQs8zVdmXJaqbaXvl17mGBvD5v0pLnZ8cXbzQTMZAgMBAAE=\n-----END PUBLIC KEY-----\n

# Authentication

AUTH_PROVIDER=local
LOCAL_AUTH_URL=http://127.0.0.1:5500/local-env-user

# Cognito configuration (if using AWS Cognito)
COGNITO_USER_POOL_ID=
COGNITO_CLIENT_ID=

# Email configuration
SMTP_HOST=smtp.test.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=test@test.com
SMTP_PASSWORD=test
EMAIL_FROM=noreply@test.com
EMAIL_FROM_NAME=Test App

# Health Check
HEALTH_CHECK_PATH=/health
HEALTH_CHECK_INTERVAL=30000
HEALTH_CHECK_CACHE_TIME=5000
HEALTH_CHECK_MEMORY_THRESHOLD=15

# Pagination
PAGINATION_DEFAULT_LIMIT=10
PAGINATION_MAX_LIMIT=100

# Monitoring
ENABLE_METRICS=false
METRICS_PORT=10090
DEBUG=false


# API Gateway & Security
CORS_ORIGIN=*
ENABLE_HELMET=false
ENABLE_CORS=true
ENABLE_COMPRESSION=true

# Rate limiting
RATE_LIMIT_ENABLE=false
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW=1 minute
RATE_LIMIT_WINDOW_MS=900000

# AWS/S3 configuration (MinIO for test environment)
AWS_REGION=us-east-1
AWS_S3_BUCKET=test-bucket
AWS_ACCESS_KEY_ID=minioadmin
AWS_SECRET_ACCESS_KEY=minioadmin
AWS_ENDPOINT_URL=http://127.0.0.1:9000
AWS_S3_ENDPOINT=http://127.0.0.1:9000
AWS_S3_REGION=us-east-1
AWS_S3_ACCESS_KEY_ID=minioadmin
AWS_S3_SECRET_ACCESS_KEY=minioadmin
MAX_UPLOAD_SIZE=5242880

# MinIO Configuration (S3-compatible storage for testing)
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin
MINIO_PORT=9000
MINIO_CONSOLE_PORT=9001

# Storage Provider Configuration
STORAGE_PROVIDER_PRIMARY=aws-s3
STORAGE_PROVIDER_FALLBACK=console

# Database seeding
SEED_CLEAR_DATABASE=true
SEED_SUPERUSER_EMAIL=admin@pika.com
SEED_SUPERUSER_PASSWORD=Admin123!
SEED_USER_COUNT=10
SEED_ADMIN_USERS_COUNT=2

# Booking configuration
MAX_BOOKING_DAYS_AHEAD=30
MIN_BOOKING_HOURS_AHEAD=2
SERVICE_HOUR_INCREMENT=30

# Testing IDs
TEST_BUSINESS_ID=test-business-id
TEST_USER_ID=test-user-id

ENABLE_NOTIFICATIONS=true
ENABLE_EMAIL_NOTIFICATIONS=false
ENABLE_SMS_NOTIFICATIONS=false
ENABLE_PUSH_NOTIFICATIONS=true
ENABLE_CACHE=true
RATE_LIMIT_ENABLE=false
ENABLE_WEBHOOK_RETRY=false

# Email configuration (disabled for tests)
EMAIL_ENABLED=false
EMAIL_FROM=noreply@pika.test
EMAIL_PROVIDER=mock

# Monitoring (disabled for tests)
ENABLE_METRICS=false
ENABLE_TRACING=false
ENABLE_HEALTH_CHECK=true
HEALTH_CHECK_INTERVAL=30000

# Rate limiting (disabled for tests)
RATE_LIMIT_ENABLED=false
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100

# Service-to-service authentication
SERVICE_API_KEY=dev-service-api-key-change-in-production
INTERNAL_API_KEY=test-internal-api-key

# Redis URL (for cloud providers - commented out for local testing)
# REDIS_URL=redis://default:password@your-redis-host.upstash.io:6379

# JWT Refresh Secret
JWT_REFRESH_SECRET=test-jwt-refresh-secret-b4f2c1a3d5e6f7890a1b2c3d4e5f67890

# Storage Provider Configuration
STORAGE_PROVIDER_PRIMARY=minio
STORAGE_PROVIDER_FALLBACK=local

# Email configuration for tests
EMAIL_FROM_NAME=Pika Test
EMAIL_PROVIDER_PRIMARY=mock
EMAIL_PROVIDER_FALLBACK=mock
RESEND_API_KEY=re_test_dummy_key

# Additional test services
SUPPORT_API_URL=http://127.0.0.1:5508
SOCIAL_API_URL=http://127.0.0.1:5509
FILE_STORAGE_API_URL=http://127.0.0.1:5510

# Test environment specific
USE_LOCALSTACK=false
LOCALSTACK_ENDPOINT=http://127.0.0.1:4566

# Email queue (disabled for tests)
EMAIL_QUEUE_ENABLED=false
EMAIL_QUEUE_CONCURRENCY=1
EMAIL_RETRY_ATTEMPTS=0
EMAIL_RETRY_DELAY=0
EMAIL_RATE_LIMIT_MAX=1000
EMAIL_RATE_LIMIT_WINDOW=1000

# SMS configuration (test)
SMS_PROVIDER_PRIMARY=mock
SMS_SENDER_ID=Test
SMS_TYPE=Transactional
SMS_RATE_LIMIT_MAX=1000
SMS_RATE_LIMIT_WINDOW=1000

# Other test configurations
PUSH_PROVIDER=mock
TEMPLATE_CACHE_TTL=0
NOTIFICATION_CACHE_TTL=0
CI=false
GITHUB_ACTIONS=false

# SMTP test configuration
SMTP_HOST=127.0.0.1
SMTP_PORT=1025
SMTP_SECURE=false
SMTP_USER=
SMTP_PASSWORD=

# Google Maps (test)
GOOGLE_MAPS_API_KEY=
GEOCODING_PROVIDER=mock

# MailHog (test email)
MAILHOG_SMTP_HOST=127.0.0.1
MAILHOG_SMTP_PORT=1025
MAILHOG_UI_PORT=8025
VALIDATE_RESPONSES=true
